<div class="container" style="padding-top: 100px;">
  <div class="ps-2" style="display: flex; justify-content: space-between;">
    <button type="button" class="btn btn-light btn-lg themeButton"style="color: white;" routerLink="/">หน้าเมนูอาหาร</button>
    <div class="themeColor titlePage" style="border-radius: 40px; padding: 0 20px;">
      <span style="color: white; font-size: 30px;">ประวัติคำสั่งซื้อ</span>
    </div>
  </div>
  <div class="row rowBasket" style="padding-top: 30px;">
    <div *ngFor="let order of this.data.allOrder.reverse()" class="cardBasket col" style="padding: 5px;">
      <div class="card basketList">
        <div class="card-body p-4">
          <p class="card-text">รหัสลูกค้า : cid-{{order.cid}} | ชื่อลูกค้า : {{order.name}}</p>
          <p class="card-text">รหัสคำสั่งซื้อ : JTOID{{order.oid}}</p>
          <p class="card-text">วันที่สั่ง : {{order.odate}}</p>
          <p class="card-text">วันที่จัดส่ง : {{order.fdate}}</p>
        </div>
        <div class="fxCenter rowButton"style="display: flex; width: 200px;">
          <div class="row" style="padding: 10px;">
            <div class="col fxCenter">
              <div style="background-color: rgb(112, 255, 117); border-radius: 20px; border: 2px solid rgb(92, 207, 69); padding: 0 20px;">
                <span style="color: rgb(38, 123, 21); font-size: 20px;">จัดส่งแล้ว</span>
              </div>
            </div>
            <div class="col fxCenter" style="padding: 10px;">
              <button type="button" class="btn btn-light btn-lg w-100 h-100 themeButton" data-bs-toggle="modal" data-bs-target="#orderCheckModal" (click)="data.selectOrder(order)"><span class="fxCenter"><mat-icon>list_alt</mat-icon>
              <span style="color: white; font-size: 17px; margin-left: 10px;">ดูรายละเอียด</span>
              </span></button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal Order Check -->
<div class="modal fade" id="orderCheckModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header ps-4 pe-4" style="display: flex; justify-content: space-between; align-items: center;">
        <h3 class="modal-title">รายละเอียดคำสั่งซื้อ</h3>
        <button class="btn btn-light btn-lg" data-bs-dismiss="modal">
          <span style="display: flex; align-items: center;">
            <mat-icon>cancel</mat-icon></span>
        </button>
      </div>
      <div class="modal-body">
        <div *ngIf="this.data.selectedOrder != null" >
          <div style="background-color: rgb(229, 229, 229); border-radius: 10px; padding: 10px 10px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center;">
            <div style="display: flex; flex-direction: column;">
              <span class="mb-1">รหัสลูกค้า : cid-{{this.data.selectedOrder.cid}}  | ชื่อลูกค้า : {{this.data.selectedOrder.name}}</span>
              <span class="mb-1">เบอร์โทร : {{this.data.selectedOrder.phone}}</span>
              <span class="mb-1">ที่อยู่ : {{this.data.selectedOrder.address}}</span>
              <span class="mb-1">รหัสคำสั่งซื้อ : JTOID{{this.data.selectedOrder.oid}}</span>
              <span class="mb-1">วันที่สั่ง : {{this.data.selectedOrder.odate}}</span>
              <span class="mb-1">วันที่จัดส่ง : {{this.data.selectedOrder.fdate}}</span>
            </div>
          </div>
          <div class="mt-3">
            <span style="font-size: 18px; font-weight: 600;">รายการสั่งซื้อ</span>
          </div>
          <div style="background-color: rgb(229, 229, 229); border-radius: 10px; padding: 10px 10px; margin-bottom: 10px;  overflow-y: scroll; height:200px;">
            <div *ngFor="let food of this.data.allFoods">
              <div class="mb-3" style="border-bottom: 1px solid gray;display: flex;justify-content: space-between; align-items: center;">
                <span>{{food.name}} X{{food.amount}}</span>
                <span>{{food.price}} บาท.</span>
              </div>
            </div>
          </div>
          <div  *ngIf="this.data.totalPrice != null" style="display: flex;justify-content: end; align-items: center;">
            <span style="font-size: 20px; font-weight: 900;">รวม {{this.data.totalPrice.total}} บาท.</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
